#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∞–π—Ç–∞..."
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Node.js
if ! command -v node &> /dev/null; then
    echo "‚ùå Node.js –Ω–µ –Ω–∞–π–¥–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è."
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ npm
if ! command -v npm &> /dev/null; then
    echo "‚ùå npm –Ω–µ –Ω–∞–π–¥–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ npm –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è."
    exit 1
fi

echo "‚úÖ Node.js –∏ npm –Ω–∞–π–¥–µ–Ω—ã"
echo ""

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
echo "üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏..."
node scripts/test-performance.js
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ FFmpeg
if command -v ffmpeg &> /dev/null; then
    echo "‚úÖ FFmpeg –Ω–∞–π–¥–µ–Ω - –º–æ–∂–Ω–æ —Å–∂–∏–º–∞—Ç—å –∞—É–¥–∏–æ"
    echo ""
    echo "üîß –°–∂–∞—Ç–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤..."
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: node scripts/optimize-audio.js"
    echo "–ó–∞—Ç–µ–º: ./scripts/compress-audio.ps1 (Windows) –∏–ª–∏ ./scripts/compress-audio.sh (Linux/Mac)"
else
    echo "‚ö†Ô∏è  FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è —Å–∂–∞—Ç–∏—è –∞—É–¥–∏–æ"
    echo "üì• –°–∫–∞—á–∞–π—Ç–µ —Å https://ffmpeg.org/download.html"
fi

echo ""
echo "üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –°–æ–∂–º–∏—Ç–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)"
echo "2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm run build"
echo "3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç: npm run dev"
echo "4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Lighthouse –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞"
echo ""
echo "‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
